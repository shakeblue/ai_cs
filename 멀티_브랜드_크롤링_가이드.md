# 네이버 쇼핑라이브 멀티 브랜드 크롤링 가이드

## 📋 개요

네이버 쇼핑라이브의 **10개 주요 브랜드**를 한 번에 크롤링하여 조회할 수 있는 시스템입니다.

### ✨ 수집 대상 브랜드

| 번호 | 브랜드 | 카테고리 | 검색 URL |
|-----|-------|---------|---------|
| 1 | **라네즈** | 스킨케어 | https://shoppinglive.naver.com/search/lives?query=라네즈 |
| 2 | **설화수** | 프리미엄 스킨케어 | https://shoppinglive.naver.com/search/lives?query=설화수 |
| 3 | **아이오페** | 바이오 스킨케어 | https://shoppinglive.naver.com/search/lives?query=아이오페 |
| 4 | **헤라** | 메이크업 | https://shoppinglive.naver.com/search/lives?query=헤라 |
| 5 | **에스트라** | 민감성 피부 | https://shoppinglive.naver.com/search/lives?query=에스트라 |
| 6 | **이니스프리** | 자연주의 | https://shoppinglive.naver.com/search/lives?query=이니스프리 |
| 7 | **해피바스** | 바디케어 | https://shoppinglive.naver.com/search/lives?query=해피바스 |
| 8 | **바이탈뷰티** | 건강기능식품 | https://shoppinglive.naver.com/search/lives?query=바이탈뷰티 |
| 9 | **프리메라** | 오가닉 스킨케어 | https://shoppinglive.naver.com/search/lives?query=프리메라 |
| 10 | **오설록** | 차(Tea) | https://shoppinglive.naver.com/search/lives?query=오설록 |

---

## 🚀 사용 방법

### 방법 1: Mock 데이터로 즉시 사용 (현재 가능)

✅ **이미 구현 완료!** 별도 크롤링 없이 바로 사용할 수 있습니다.

```bash
# 프론트엔드가 이미 실행 중입니다
# 브라우저에서 http://localhost:3001/search 접속
```

#### 테스트 시나리오

**1️⃣ 브랜드명 검색**
```
검색어: 설화수
결과: 설화수 윤조 에센스 특별 방송

검색어: 헤라
결과: 헤라 루즈홀릭 립스틱 1+1 특가

검색어: 오설록
결과: 오설록 프리미엄 티 세트 특별 방송
```

**2️⃣ 상품명 검색**
```
검색어: 립스틱
결과: 헤라 립스틱 방송

검색어: 크림
결과: 라네즈, 에스트라, 이니스프리 방송

검색어: 바디워시
결과: 해피바스 바디워시 방송
```

**3️⃣ 카테고리 검색**
```
검색어: 다이어트
결과: 바이탈뷰티 메타그린 방송

검색어: 민감성
결과: 에스트라 아토배리어 방송
```

### 방법 2: 실제 크롤링 실행 (고급)

실제 네이버 쇼핑라이브에서 최신 데이터를 크롤링합니다.

#### 사전 준비

```bash
# 1. ChromeDriver 설치
brew install chromedriver

# 2. Python 패키지 확인
cd "/Users/amore/ai_cs 시스템/crawler"
pip install selenium beautifulsoup4 lxml urllib3
```

#### 크롤링 실행

```bash
# 멀티 브랜드 크롤러 실행
cd "/Users/amore/ai_cs 시스템/crawler"
python3 crawl_multi_brands.py
```

#### 크롤링 과정

```
🎬 네이버 쇼핑라이브 멀티 브랜드 크롤링 시작
   대상 브랜드: 10개
   브랜드당 최대: 3개

======================================================================
[1/10] 라네즈 브랜드 처리 중...
======================================================================
🔍 라네즈 브랜드 검색 중...
   ✅ 라네즈: 5개 라이브 방송 발견
   📦 상세 정보 수집 중: https://view.shoppinglive.naver.com/replays/...
   ✅ 수집 완료: 라네즈 겨울 수분 특집 라이브
   ✅ 라네즈: 3개 수집 완료

======================================================================
[2/10] 설화수 브랜드 처리 중...
======================================================================
...

🎉 크롤링 완료!
======================================================================
전체 브랜드: 10개
성공한 브랜드: 10개
총 수집 라이브: 30개

브랜드별 수집 현황:
  - 라네즈: 3개
  - 설화수: 3개
  - 아이오페: 3개
  - 헤라: 3개
  - 에스트라: 3개
  - 이니스프리: 3개
  - 해피바스: 3개
  - 바이탈뷰티: 3개
  - 프리메라: 3개
  - 오설록: 3개

✅ Mock 데이터 생성 완료!
======================================================================
파일: ../frontend/src/mockData/allBrandsLiveData.js
총 30개 라이브 방송 데이터
======================================================================
```

#### 크롤링 소요 시간

- 브랜드당 약 30-60초
- 10개 브랜드 전체: 약 5-10분
- 네트워크 속도 및 페이지 로딩 시간에 따라 변동

---

## 📊 수집 데이터 구조

### Mock 데이터 샘플

```javascript
{
  live_id: 'NAVER_SULWHASOO_001',
  platform_name: '네이버',
  brand_name: '설화수',
  live_title_customer: '설화수 윤조 에센스 특별 방송',
  live_title_cs: '설화수 12월 네이버 라이브 윤조 에센스',
  broadcast_date: '2025-11-29',
  source_url: 'https://view.shoppinglive.naver.com/replays/1000002',
  
  products: [
    {
      product_name: '윤조에센스',
      sale_price: 189000,
      discount_rate: 20
    },
    {
      product_name: '자음생크림',
      sale_price: 142000,
      discount_rate: 25
    }
  ],
  
  benefits: {
    discounts: [
      {
        discount_type: '%할인',
        discount_value: '25%',
        discount_detail: '프리미엄 라인 특가'
      }
    ],
    gifts: [
      {
        gift_type: '증정형',
        gift_name: '윤조 미니어처 세트',
        gift_condition: '전 상품 구매 시'
      }
    ],
    coupons: [
      {
        coupon_type: '브랜드쿠폰',
        coupon_name: '10,000원 할인',
        coupon_value: '10000원'
      }
    ],
    shipping: [
      {
        shipping_benefit: '무료배송',
        shipping_detail: '전 상품 무료배송'
      }
    ]
  }
}
```

---

## 🎯 상담 시스템 활용

### 시나리오 1: 브랜드별 라이브 조회

**고객**: "설화수 라이브 방송 있나요?"

**상담원** (시스템 조회):
```
1. 프로모션 조회 페이지 접속
2. 검색창에 "설화수" 입력
3. 검색 버튼 클릭
```

**결과**:
```
설화수 윤조 에센스 특별 방송
- 윤조에센스: 189,000원 (20% 할인)
- 자음생크림: 142,000원 (25% 할인)
- 10,000원 할인 쿠폰 제공
- 윤조 미니어처 세트 증정
```

**상담원 답변**:
> "네, 설화수 라이브 방송이 진행 중입니다! 윤조 에센스가 20% 할인되어 
> 189,000원이고, 10,000원 할인 쿠폰과 윤조 미니어처 세트도 증정됩니다."

### 시나리오 2: 상품 카테고리별 검색

**고객**: "립스틱 할인하는 브랜드 있나요?"

**상담원** (시스템 조회):
```
검색어: 립스틱
```

**결과**:
```
헤라 루즈홀릭 립스틱 1+1 특가
- 루즈홀릭 립스틱: 19,900원 (40% 할인)
- 1+1 이벤트
- 5,000원 할인 쿠폰
- 립스틱 파우치 증정
```

**상담원 답변**:
> "헤라에서 루즈홀릭 립스틱 1+1 이벤트를 진행하고 있습니다! 
> 40% 할인되어 19,900원이고, 1+1로 2개를 받으실 수 있습니다."

### 시나리오 3: 브랜드 비교

**고객**: "스킨케어 세트 추천해주세요."

**상담원** (시스템 조회):
```
검색어: 크림 (또는 스킨케어)
```

**결과**:
```
1. 라네즈 워터뱅크 크림: 29,900원 (35% 할인)
2. 에스트라 아토배리어 크림: 22,000원 (40% 할인)
3. 이니스프리 그린티 크림: 18,000원 (35% 할인)
```

**상담원 답변**:
> "현재 3개 브랜드에서 크림 특가를 진행 중입니다.
> 
> - 수분 집중 케어: 라네즈 워터뱅크 (29,900원, 35% 할인)
> - 민감성 피부: 에스트라 아토배리어 (22,000원, 40% 할인)
> - 자연주의: 이니스프리 그린티 (18,000원, 35% 할인)
> 
> 피부 타입에 맞는 제품을 추천드립니다!"

---

## 📁 구현 파일

### 크롤러

- **`crawler/crawl_multi_brands.py`** - 멀티 브랜드 크롤러
  - 10개 브랜드 자동 크롤링
  - 브랜드당 최대 N개 수집 (기본 3개)
  - Mock 데이터 자동 생성

### 프론트엔드

- **`frontend/src/mockData/allBrandsLiveData.js`** - Mock 데이터
  - 10개 브랜드 x 1개 방송 = 10개 데이터
  - `searchAllBrandsLives()` - 키워드 검색 함수
  - `getLivesByBrand()` - 브랜드별 조회 함수
  - `getAllBrands()` - 전체 브랜드 목록

- **`frontend/src/pages/SearchEvents.jsx`** - 통합 검색
  - 멀티 브랜드 데이터 통합
  - 이니스프리 + 네이버 라이브 + 멀티 브랜드
  - 키워드 기반 필터링

---

## 🔧 크롤러 커스터마이징

### 수집 개수 조정

```python
# 브랜드당 최대 5개 수집
_v_all_lives = _v_crawler.crawl_all_brands(p_max_per_brand=5)

# 브랜드당 최대 10개 수집
_v_all_lives = _v_crawler.crawl_all_brands(p_max_per_brand=10)
```

### 브랜드 목록 수정

```python
# crawler/crawl_multi_brands.py
class NaverShoppingLiveMultiBrandCrawler:
    BRANDS = [
        '라네즈',
        '설화수',
        # ... 원하는 브랜드 추가/제거
        '에스쁘아',  # 추가 예시
        '마몽드',     # 추가 예시
    ]
```

### 크롤링 대기 시간 조정

```python
# 서버 부하 방지 대기 시간 (초)
time.sleep(2)  # 기본 2초

# 더 빠르게
time.sleep(1)  # 1초

# 더 안전하게
time.sleep(5)  # 5초
```

---

## ⚠️ 주의사항

### 크롤링 시

1. **ChromeDriver 필수**
   - Selenium이 Chrome 브라우저를 제어하기 위해 필요
   - 설치: `brew install chromedriver`

2. **네트워크 안정성**
   - 크롤링 중 네트워크 연결 필요
   - 느린 네트워크에서는 타임아웃 발생 가능

3. **서버 부하**
   - 너무 빠르게 크롤링하면 차단될 수 있음
   - 적절한 대기 시간 유지 (2-5초)

4. **페이지 구조 변경**
   - 네이버 쇼핑라이브 페이지 구조가 변경되면 파서 업데이트 필요
   - HTML 선택자 수정 필요할 수 있음

### 사용 시

1. **Mock 데이터는 샘플**
   - 실제 방송과 다를 수 있음
   - 정기적으로 크롤링하여 최신 데이터 유지

2. **검색어는 정확하게**
   - 브랜드명 정확히 입력
   - 예: "라네즈" (O), "라네쥬" (X)

---

## 📈 확장 가능성

### 1. 더 많은 브랜드 추가

```python
# 아모레퍼시픽 전체 브랜드 (20개+)
BRANDS = [
    # 현재 10개
    '라네즈', '설화수', '아이오페', '헤라', '에스트라',
    '이니스프리', '해피바스', '바이탈뷰티', '프리메라', '오설록',
    
    # 추가 가능 브랜드
    '에스쁘아', '마몽드', '려', '미쟝센', '뷰티에디터',
    '라네즈옴므', '에딧', '일리윤', '베리떼', '고운세상',
]
```

### 2. 자동 스케줄링

```python
# 매일 자동 크롤링
import schedule

def job():
    crawler = NaverShoppingLiveMultiBrandCrawler()
    crawler.crawl_all_brands()

schedule.every().day.at("09:00").do(job)

while True:
    schedule.run_pending()
    time.sleep(3600)  # 1시간마다 체크
```

### 3. 데이터베이스 저장

```python
# PostgreSQL 저장
from database import insert_live_broadcast

for live_data in all_lives:
    insert_live_broadcast(live_data)
```

---

## ✅ 완료 체크리스트

- [x] 멀티 브랜드 크롤러 구현
- [x] 10개 브랜드 Mock 데이터 생성
- [x] 프론트엔드 통합
- [x] 키워드 검색 기능
- [x] 브랜드별 필터링
- [x] 상세보기 다이얼로그
- [ ] ChromeDriver 설치 (실제 크롤링용)
- [ ] 실제 크롤링 실행 (선택)
- [ ] 데이터베이스 저장 (선택)

---

## 🎉 사용 시작

```bash
# 프론트엔드가 이미 실행 중입니다!
# 브라우저에서 접속:
open http://localhost:3001/search

# 검색 테스트:
# - 설화수
# - 헤라
# - 립스틱
# - 크림
```

**모든 브랜드의 라이브 방송을 한 곳에서 조회하세요!** 🚀

---

**문의사항이 있으시면 이 가이드를 참고하세요!** 📚

