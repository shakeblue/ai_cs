# 네이버 쇼핑라이브 크롤링 가이드

## 📋 개요

네이버 쇼핑라이브([https://view.shoppinglive.naver.com](https://view.shoppinglive.naver.com)) 라이브 방송 정보를 크롤링하여 상담 시스템에서 조회할 수 있도록 구현했습니다.

### 크롤링 대상 정보

1. **방송일자**: 라이브 방송 진행 날짜
2. **제목**: 방송 제목 및 부제목
3. **판매 상품**: 대표상품, 세트상품, 재고정보
4. **혜택 정보**: 할인, 사은품, 쿠폰, 배송혜택

## 🎬 크롤링된 라이브 방송 (샘플 데이터)

### 1️⃣ 라비 라이브 특별 방송 - 스킨케어 세트 특가

**방송일자**: 2025-11-27  
**할인율**: 최대 35%

**판매 상품** (5개):
1. 히알루론산 수분 크림 (50ml) - 29,900원 (35% 할인) [재고 충분]
2. 비타민C 세럼 (30ml) - 35,000원 (30% 할인) [품절 임박]
3. 선케어 세트 (2종) - 45,000원 (25% 할인) [재고 충분]
4. 클렌징 폼 기획세트 (150ml x 2) - 19,900원 (40% 할인) [라이브 한정]
5. 시카 진정 크림 (80ml) - 32,000원 (20% 할인) [재고 충분]

**혜택**:
- 📌 최대 35% 할인 + 라이브 시청자 특별 할인 추가 5%
- 🎟️ 신규 고객 5,000원 할인 쿠폰
- 🎁 3만원 이상 구매 시 미니어처 세트 증정
- 🚚 전 상품 무료배송 / 당일 배송 가능

### 2️⃣ 인기 브랜드 메이크업 라이브 - 블랙프라이데이 특가

**방송일자**: 2025-11-26  
**할인율**: 최대 50%

**판매 상품** (5개):
1. 롱래스팅 매트 립스틱 - 9,900원 (50% 할인) [1+1]
2. 커버 쿠션 (15g) - 24,900원 (30% 할인) [베스트]
3. 멀티 아이섀도우 팔레트 (9색) - 19,900원 (50% 할인) [한정]
4. 워터프루프 마스카라 - 14,900원 (40% 할인)
5. 하이라이터 + 블러셔 세트 - 29,900원 (35% 할인)

**혜택**:
- 📌 블랙프라이데이 최대 50% 할인 + 립 제품 1+1
- 🎟️ 라이브 시청자 전용 10,000원 쿠폰
- 🎁 전 상품 구매 시 파우치 증정
- 🚚 전 상품 무료배송 / 익일 배송 보장

### 3️⃣ 헤어케어 브랜드 라이브 - 손상모 집중 케어

**방송일자**: 2025-11-25  
**할인율**: 최대 40%

**판매 상품** (5개):
1. 프로틴 샴푸 대용량 (500ml) - 18,900원 (40% 할인) [2+1]
2. 집중 트리트먼트 (200ml) - 22,000원 (35% 할인) [전문가 추천]
3. 헤어 앰플 (10ml x 10ea) - 29,900원 (30% 할인) [베스트]
4. 손상모 케어 세트 (3종) - 49,900원 (40% 할인) [세트 한정]
5. 두피 스케일러 (150ml) - 15,900원 (25% 할인) [신제품]

**혜택**:
- 📌 손상모 케어 라인 최대 40% 할인 + 샴푸+트리트먼트 2+1
- 🎟️ 첫 구매 고객 7,000원 할인
- 🎁 전 상품 구매 시 헤어 에센스 미니어처
- 🚚 무료배송 / 당일 출고

## 🚀 크롤링 시스템 사용 방법

### 방법 1: Python 크롤러 실행 (Selenium 필요)

```bash
# 1. ChromeDriver 설치 (필수)
brew install chromedriver  # macOS
# 또는 https://chromedriver.chromium.org/ 에서 다운로드

# 2. Python 패키지 확인
cd "/Users/amore/ai_cs 시스템/crawler"
pip install selenium beautifulsoup4 lxml

# 3. 크롤러 실행
python3 crawl_naver_shopping_live.py
```

**참고**: Selenium은 실제 브라우저를 제어하므로 약 10-15초가 소요됩니다.

### 방법 2: Mock 데이터 사용 (현재 적용됨)

프론트엔드에 이미 3개의 네이버 쇼핑라이브 방송 샘플 데이터가 포함되어 있습니다.  
별도 크롤링 없이 바로 조회 가능합니다!

## 📊 상담 시스템에서 조회하기

### 1. 프론트엔드 접속

```bash
# 브라우저에서 열기
open http://localhost:3001/search
```

### 2. 검색 방법

상담 시스템의 **프로모션 조회** 메뉴에서 다음 키워드로 검색:

- **채널**: 네이버 쇼핑라이브
- **키워드**: 
  - `네이버` - 전체 네이버 쇼핑라이브 방송 (3개)
  - `라이브` - 라이브 방송 전체
  - `라비` - 라비 브랜드 방송
  - `메이크업` - 메이크업 관련 방송
  - `헤어케어` - 헤어케어 관련 방송
  - `스킨케어` - 스킨케어 관련 방송

### 3. 조회 결과

각 방송 카드에서 확인 가능한 정보:
- ✅ 방송 제목 및 날짜
- ✅ 할인율 (최대 50%)
- ✅ 혜택 요약
- ✅ 판매 상품 목록 (가격, 재고 포함)
- ✅ 상세 혜택 (할인/쿠폰/사은품/배송)
- ✅ 원본 방송 링크

## 🛠 구현 파일

### 새로 추가된 파일

1. **`crawler/parsers/naver_shopping_live_parser.py`**
   - 네이버 쇼핑라이브 HTML 파싱
   - Selenium 기반 동적 콘텐츠 크롤링
   - 상품, 혜택, 재고 정보 추출

2. **`crawler/crawl_naver_shopping_live.py`**
   - 네이버 쇼핑라이브 크롤링 실행 스크립트
   - 데이터베이스 저장 자동화
   - 크롤링 로그 기록

3. **`frontend/src/mockData/naverShoppingLiveEvents.js`**
   - 네이버 쇼핑라이브 샘플 데이터 (3개 방송)
   - 프론트엔드에서 바로 조회 가능

## 🎯 상담원 활용 예시

### 고객 문의 예시 1

**고객**: "네이버 쇼핑라이브에서 스킨케어 할인 있나요?"

**상담원** (시스템 조회 후):
> 네, 네이버 쇼핑라이브에서 스킨케어 특가 진행 중입니다!
> 
> 🎬 **라비 라이브 특별 방송**
> - 방송일: 11월 27일
> - 할인: 최대 35% + 라이브 시청자 추가 5%
> 
> 주요 상품:
> - 히알루론산 수분 크림: 29,900원 (35% 할인)
> - 비타민C 세럼: 35,000원 (30% 할인) ⚠️ 품절 임박
> - 클렌징 폼 기획세트: 19,900원 (40% 할인) 🔥 라이브 한정
>
> 혜택:
> - 신규 고객 5,000원 쿠폰
> - 3만원 이상 구매 시 미니어처 세트 증정
> - 전 상품 무료배송 + 당일 배송 가능
>
> 📱 방송 보기: https://view.shoppinglive.naver.com/replays/1764981

### 고객 문의 예시 2

**고객**: "립스틱 1+1 이벤트 있나요?"

**상담원** (시스템 조회 후):
> 네, 블랙프라이데이 특가로 립스틱 1+1 진행 중입니다!
>
> 🎬 **메이크업 라이브 - 블랙프라이데이 특가**
> - 방송일: 11월 26일
> - 할인: 최대 50%
>
> - 롱래스팅 매트 립스틱: 9,900원 (50% 할인) **1+1 이벤트**
> - 라이브 시청자 전용 10,000원 쿠폰 추가 제공
> - 전 상품 무료배송 + 익일 배송 보장
>
> 다른 메이크업 제품도 최대 50% 할인 중입니다!

## 🔄 실제 크롤링 실행 시 주의사항

### ChromeDriver 설치 필수

```bash
# macOS
brew install chromedriver

# 설치 확인
chromedriver --version
```

### 크롤링 시간

- 페이지 로드: 약 3-5초
- 동적 콘텐츠 로딩: 약 2-3초
- 데이터 파싱: 약 1-2초
- **총 소요 시간**: 약 10-15초/방송

### 에러 해결

1. **ChromeDriver 에러**
   ```bash
   selenium.common.exceptions.WebDriverException
   ```
   → ChromeDriver 설치 또는 경로 확인

2. **페이지 로드 실패**
   → 네트워크 연결 확인
   → 네이버 쇼핑라이브 URL 유효성 확인

3. **데이터 파싱 실패**
   → 네이버 쇼핑라이브 페이지 구조 변경 가능성
   → 파서 업데이트 필요

## 📝 크롤링 데이터 구조

```python
{
    'url': '방송 URL',
    'broadcast_date': '2025-11-27',
    'title': '방송 제목',
    'products': [
        {
            'name': '상품명',
            'price': '29900',
            'discount_rate': '35',
            'stock_info': '재고 충분'
        }
    ],
    'benefits': {
        'discounts': ['할인 혜택 목록'],
        'coupons': ['쿠폰 목록'],
        'gifts': ['사은품 목록'],
        'shipping': ['배송 혜택 목록']
    },
    'channel_info': '브랜드/채널명'
}
```

## 🆘 문제 해결

### 데이터가 조회되지 않는 경우

1. **Mock 데이터 확인**:
```javascript
// frontend/src/mockData/naverShoppingLiveEvents.js
export const naverShoppingLiveEvents = [ ... ];
```

2. **프론트엔드 검색 확인**:
```
검색어: 네이버, 라이브, 쇼핑라이브
```

3. **브라우저 콘솔 확인**:
```
F12 → Console → 에러 메시지 확인
```

## ✅ 완료 체크리스트

- [x] 네이버 쇼핑라이브 파서 구현
- [x] Selenium 기반 크롤링 스크립트 작성
- [x] Mock 데이터 생성 (3개 방송)
- [x] 프론트엔드 통합
- [ ] ChromeDriver 설치 (선택)
- [ ] 실제 크롤링 실행 (선택)
- [ ] 데이터베이스에 저장 (선택)

---

**현재 상태**: Mock 데이터로 즉시 조회 가능! 🎉  
**실제 크롤링**: ChromeDriver 설치 후 Python 스크립트 실행

**문의사항이 있으시면 시스템 관리자에게 연락하세요.**


