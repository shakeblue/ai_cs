# Supabase í™•ì¥ í…Œì´ë¸” ìƒì„± ê°€ì´ë“œ

ì‘ì„± ì¼ì‹œ: 2025-12-04
í”„ë¡œì íŠ¸: AI CS ì‹œìŠ¤í…œ

---

## âœ… ì¤€ë¹„ ì™„ë£Œ

- âœ… SQL ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì™„ë£Œ
- âœ… SQLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨
- âœ… ë¸Œë¼ìš°ì €ì—ì„œ Supabase SQL Editor ì—´ë¦¼

---

## ğŸš€ í…Œì´ë¸” ìƒì„± ë°©ë²• (3ë¶„ ì†Œìš”)

### ë°©ë²• 1: Supabase SQL Editor (ê¶Œì¥) â­

1. **ë¸Œë¼ìš°ì €ì—ì„œ Supabase SQL Editor ì—´ê¸°**:
   ```
   https://supabase.com/dashboard/project/uewhvekfjjvxoioklzza/sql
   ```
   (ì´ë¯¸ ì—´ë ¤ìˆì„ ê²ƒì…ë‹ˆë‹¤)

2. **SQL ë¶™ì—¬ë„£ê¸°**:
   - SQL Editor í™”ë©´ì—ì„œ `Cmd + V` (Mac) ë˜ëŠ” `Ctrl + V` (Windows)
   - ë˜ëŠ” ì•„ë˜ íŒŒì¼ ë‚´ìš©ì„ ë³µì‚¬:
     ```
     /Users/amore/ai_cs ì‹œìŠ¤í…œ/database/enhanced_live_schema.sql
     ```

3. **ì‹¤í–‰**:
   - ìš°ì¸¡ í•˜ë‹¨ì˜ `Run` ë²„íŠ¼ í´ë¦­
   - ë˜ëŠ” `Cmd + Enter` (Mac) / `Ctrl + Enter` (Windows)

4. **ì™„ë£Œ í™•ì¸**:
   - ì„±ê³µ ë©”ì‹œì§€ í™•ì¸
   - ì¢Œì¸¡ ë©”ë‰´ì—ì„œ `Table Editor` í´ë¦­
   - ìƒˆë¡œìš´ í…Œì´ë¸”ë“¤ì´ ë³´ì´ë©´ ì„±ê³µ!

---

### ë°©ë²• 2: í„°ë¯¸ë„ì—ì„œ íŒŒì¼ í™•ì¸

```bash
# SQL íŒŒì¼ ë‚´ìš© í™•ì¸
cat "/Users/amore/ai_cs ì‹œìŠ¤í…œ/database/enhanced_live_schema.sql"

# í´ë¦½ë³´ë“œì— ë³µì‚¬
cat "/Users/amore/ai_cs ì‹œìŠ¤í…œ/database/enhanced_live_schema.sql" | pbcopy

# Supabase SQL Editor ì—´ê¸°
open "https://supabase.com/dashboard/project/uewhvekfjjvxoioklzza/sql"
```

---

## ğŸ“Š ìƒì„±ë  í…Œì´ë¸” (7ê°œ)

### 1. live_products (í™•ì¥)
**ì¶”ê°€ë˜ëŠ” ì»¬ëŸ¼**:
- `product_image_url` - ìƒí’ˆ ì´ë¯¸ì§€ URL
- `product_thumbnail_url` - ìƒí’ˆ ì¸ë„¤ì¼ URL
- `product_link` - ìƒí’ˆ ë§í¬
- `mall_name` - ëª° ì´ë¦„
- `product_badge` - ìƒí’ˆ ë°°ì§€
- `delivery_fee` - ë°°ì†¡ë¹„
- `is_free_delivery` - ë¬´ë£Œë°°ì†¡ ì—¬ë¶€

### 2. live_coupons (ì‹ ê·œ)
**ìš©ë„**: ë¼ì´ë¸Œ ë°©ì†¡ ì¿ í° ì •ë³´
**ì£¼ìš” ì»¬ëŸ¼**:
- `coupon_name` - ì¿ í°ëª…
- `coupon_type` - ì¿ í° íƒ€ì… (í• ì¸ì¿ í°, ì ë¦½ì¿ í°, ë¬´ë£Œë°°ì†¡)
- `discount_rate` - í• ì¸ìœ¨
- `discount_amount` - í• ì¸ ê¸ˆì•¡
- `valid_from`, `valid_until` - ìœ íš¨ ê¸°ê°„

### 3. live_comments (ì‹ ê·œ)
**ìš©ë„**: ë¼ì´ë¸Œ ë°©ì†¡ ëŒ“ê¸€/ì±„íŒ…
**ì£¼ìš” ì»¬ëŸ¼**:
- `comment_text` - ëŒ“ê¸€ ë‚´ìš©
- `comment_type` - ëŒ“ê¸€ íƒ€ì… (comment, chat, question)
- `user_name` - ì‚¬ìš©ìëª…
- `like_count` - ì¢‹ì•„ìš” ìˆ˜

### 4. live_faqs (ì‹ ê·œ)
**ìš©ë„**: ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
**ì£¼ìš” ì»¬ëŸ¼**:
- `question` - ì§ˆë¬¸
- `answer` - ë‹µë³€
- `category` - ì¹´í…Œê³ ë¦¬ (ì œí’ˆ, ë°°ì†¡, í˜œíƒ, ë°˜í’ˆ/êµí™˜)
- `is_official` - ê³µì‹ FAQ ì—¬ë¶€

### 5. live_intro (ì‹ ê·œ)
**ìš©ë„**: ë¼ì´ë¸Œ ë°©ì†¡ ì†Œê°œ
**ì£¼ìš” ì»¬ëŸ¼**:
- `intro_title` - ì†Œê°œ ì œëª©
- `intro_description` - ì†Œê°œ ì„¤ëª…
- `intro_highlights` - ì£¼ìš” í¬ì¸íŠ¸ (JSONB)
- `host_name` - ì§„í–‰ì ì´ë¦„

### 6. live_statistics (ì‹ ê·œ)
**ìš©ë„**: ë¼ì´ë¸Œ ë°©ì†¡ í†µê³„
**ì£¼ìš” ì»¬ëŸ¼**:
- `view_count` - ì¡°íšŒìˆ˜
- `like_count` - ì¢‹ì•„ìš” ìˆ˜
- `comment_count` - ëŒ“ê¸€ ìˆ˜
- `purchase_count` - êµ¬ë§¤ ìˆ˜
- `total_sales_amount` - ì´ íŒë§¤ì•¡

### 7. live_images (ì‹ ê·œ)
**ìš©ë„**: ë¼ì´ë¸Œ ë°©ì†¡ ì´ë¯¸ì§€
**ì£¼ìš” ì»¬ëŸ¼**:
- `image_url` - ì´ë¯¸ì§€ URL
- `image_type` - ì´ë¯¸ì§€ íƒ€ì… (thumbnail, banner, product, host)
- `image_alt` - ëŒ€ì²´ í…ìŠ¤íŠ¸

---

## âœ… ìƒì„± í™•ì¸ ë°©ë²•

### 1. Supabase Table Editorì—ì„œ í™•ì¸
```
https://supabase.com/dashboard/project/uewhvekfjjvxoioklzza/editor
```

ì¢Œì¸¡ ë©”ë‰´ì—ì„œ ë‹¤ìŒ í…Œì´ë¸”ë“¤ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:
- âœ… live_coupons
- âœ… live_comments
- âœ… live_faqs
- âœ… live_intro
- âœ… live_statistics
- âœ… live_images

### 2. SQL Queryë¡œ í™•ì¸

Supabase SQL Editorì—ì„œ ì‹¤í–‰:
```sql
-- ëª¨ë“  í…Œì´ë¸” ëª©ë¡ ì¡°íšŒ
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_name LIKE 'live_%'
ORDER BY table_name;

-- ê° í…Œì´ë¸”ì˜ ë ˆì½”ë“œ ìˆ˜ í™•ì¸
SELECT 
  'live_products' as table_name, COUNT(*) as count FROM live_products
UNION ALL
SELECT 'live_coupons', COUNT(*) FROM live_coupons
UNION ALL
SELECT 'live_comments', COUNT(*) FROM live_comments
UNION ALL
SELECT 'live_faqs', COUNT(*) FROM live_faqs
UNION ALL
SELECT 'live_intro', COUNT(*) FROM live_intro
UNION ALL
SELECT 'live_statistics', COUNT(*) FROM live_statistics
UNION ALL
SELECT 'live_images', COUNT(*) FROM live_images;
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "relation already exists" ì—ëŸ¬
**ì›ì¸**: í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•¨
**í•´ê²°**: ì •ìƒì…ë‹ˆë‹¤. `IF NOT EXISTS` êµ¬ë¬¸ìœ¼ë¡œ ì¤‘ë³µ ìƒì„± ë°©ì§€ë¨

### ë¬¸ì œ 2: "foreign key constraint" ì—ëŸ¬
**ì›ì¸**: `live_broadcasts` í…Œì´ë¸”ì´ ì—†ìŒ
**í•´ê²°**: ë¨¼ì € ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ìƒì„± í•„ìš”
```sql
-- live_broadcasts í…Œì´ë¸”ì´ ìˆëŠ”ì§€ í™•ì¸
SELECT * FROM live_broadcasts LIMIT 1;
```

### ë¬¸ì œ 3: "permission denied" ì—ëŸ¬
**ì›ì¸**: ê¶Œí•œ ë¶€ì¡±
**í•´ê²°**: Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

í…Œì´ë¸” ìƒì„± ì™„ë£Œ í›„:

### 1. ì¢…í•© í¬ë¡¤ëŸ¬ ì‹¤í–‰
```bash
cd "/Users/amore/ai_cs ì‹œìŠ¤í…œ/crawler"
python3 comprehensive_naver_crawler.py
```

### 2. ë°ì´í„° í™•ì¸
```sql
-- ìµœê·¼ ìˆ˜ì§‘ëœ ë°ì´í„° í™•ì¸
SELECT 
  l.live_id,
  l.title,
  COUNT(DISTINCT p.product_id) as products,
  COUNT(DISTINCT c.coupon_id) as coupons,
  COUNT(DISTINCT cm.comment_id) as comments
FROM live_broadcasts l
LEFT JOIN live_products p ON l.live_id = p.live_id
LEFT JOIN live_coupons c ON l.live_id = c.live_id
LEFT JOIN live_comments cm ON l.live_id = cm.live_id
GROUP BY l.live_id, l.title
ORDER BY l.created_at DESC
LIMIT 10;
```

### 3. ë°±ì—”ë“œ API ì—…ë°ì´íŠ¸
- `eventService.js`ì— ìƒˆ í…Œì´ë¸” ì¡°íšŒ ë¡œì§ ì¶”ê°€
- ì¿ í°, ëŒ“ê¸€, FAQ ë“± ì •ë³´ ë°˜í™˜

### 4. í”„ë¡ íŠ¸ì—”ë“œ UI ì¶”ê°€
- `LiveBroadcastDetail.jsx`ì— ìƒˆ ì •ë³´ í‘œì‹œ
- ì¿ í°, ëŒ“ê¸€, FAQ ì„¹ì…˜ ì¶”ê°€

---

## ğŸ“ ì°¸ê³  íŒŒì¼

- **SQL ìŠ¤í¬ë¦½íŠ¸**: `/Users/amore/ai_cs ì‹œìŠ¤í…œ/database/enhanced_live_schema.sql`
- **ì¢…í•© í¬ë¡¤ëŸ¬**: `/Users/amore/ai_cs ì‹œìŠ¤í…œ/crawler/comprehensive_naver_crawler.py`
- **ì™„ë£Œ ë³´ê³ ì„œ**: `/Users/amore/ai_cs ì‹œìŠ¤í…œ/ì¢…í•©_í¬ë¡¤ëŸ¬_ì™„ë£Œ_ë³´ê³ ì„œ.md`

---

## ğŸ‰ ì™„ë£Œ!

í…Œì´ë¸” ìƒì„±ì´ ì™„ë£Œë˜ë©´ ì¢…í•© í¬ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ì •ë³´ë¥¼ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**:
- í…Œì´ë¸” ìƒì„±: 1-2ë¶„
- í¬ë¡¤ëŸ¬ ì‹¤í–‰: 5-10ë¶„ (ë¼ì´ë¸Œ 1ê°œë‹¹)
- ë°ì´í„° í™•ì¸: 1ë¶„

**ì´ ì†Œìš” ì‹œê°„**: ì•½ 10-15ë¶„
